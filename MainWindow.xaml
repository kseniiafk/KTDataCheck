<Window x:Class="KTDataCheck.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:KTDataCheck"
        mc:Ignorable="d"
        Title="Форма с валидацией" Height="499" Width="463">
    <Window.Resources>
        <local:ValidationMessageColorConverter x:Key="ValidationMessageColorConverter"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 0: Имя Label -->
            <RowDefinition Height="Auto"/>
            <!-- 1: Имя TextBox -->
            <RowDefinition Height="Auto"/>
            <!-- 2: Имя Validation -->
            <RowDefinition Height="Auto"/>
            <!-- 3: Email Label -->
            <RowDefinition Height="Auto"/>
            <!-- 4: Email TextBox -->
            <RowDefinition Height="Auto"/>
            <!-- 5: Email Validation -->
            <RowDefinition Height="Auto"/>
            <!-- 6: Возраст Label -->
            <RowDefinition Height="Auto"/>
            <!-- 7: Возраст TextBox -->
            <RowDefinition Height="Auto"/>
            <!-- 8: Возраст Validation -->
            <RowDefinition Height="Auto"/>
            <!-- 9: Телефон Label -->
            <RowDefinition Height="Auto"/>
            <!-- 10: Телефон TextBox -->
            <RowDefinition Height="Auto"/>
            <!-- 11: Телефон Validation -->
            <RowDefinition Height="Auto"/>
            <!-- 12: Кнопка -->
            <RowDefinition Height="*"/>
            <!-- 13: Сообщение -->
        </Grid.RowDefinitions>

        <!-- Имя -->
        <Label Grid.Row="0" Content="Имя:"/>
        <TextBox Grid.Row="1" Text="{Binding User.Name, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <TextBlock Grid.Row="2" Text="{Binding User[Name]}" Foreground="Red" Margin="0,0,0,10"/>

        <!-- Email -->
        <Label Grid.Row="3" Content="Email:"/>
        <TextBox Grid.Row="4" Text="{Binding User.Email, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <TextBlock Grid.Row="5" Text="{Binding User[Email]}" Foreground="Red" Margin="0,0,0,10"/>

        <!-- Возраст -->
        <Label Grid.Row="6" Content="Возраст:"/>
        <TextBox Grid.Row="7" Text="{Binding User.Age, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <TextBlock Grid.Row="8" Text="{Binding User[Age]}" Foreground="Red" Margin="0,0,0,10"/>

        <!-- Телефон -->
        <Label Grid.Row="9" Content="Телефон (необязательно):"/>
        <TextBox Grid.Row="10" Text="{Binding User.Phone, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
        <TextBlock Grid.Row="11" Text="{Binding User[Phone]}" Foreground="Red" Margin="0,0,0,10"/>

        <!-- Кнопка отправки -->
        <Button Grid.Row="12" Content="Отправить" Command="{Binding SubmitCommand}" 
                HorizontalAlignment="Center" Padding="20,5" Margin="0,20"/>

        <!-- Сообщение валидации -->
        <TextBlock Grid.Row="13" Text="{Binding ValidationMessage}" 
                   TextWrapping="Wrap" HorizontalAlignment="Center" 
                   Foreground="{Binding ValidationMessage, Converter={StaticResource ValidationMessageColorConverter}}"/>
    </Grid>
</Window>